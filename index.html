<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión de Proveedores</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="static/CSS/styles.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="bi bi-building"></i> Gestión de Proveedores
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-label="Mostrar menú">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link active" href="index.html">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link" href="templates/lista-proveedores.html">Proveedores</a></li>
                    <li class="nav-item"><a class="nav-link" href="templates/ver-documentos.html">Documentos</a></li>
                    <li class="nav-item"><a class="nav-link" href="templates/configuracion-github.html">
                        <i class="bi bi-github"></i> GitHub
                    </a></li>
                    <li class="nav-item"><a class="nav-link" href="templates/admin-archivos.html">
                        <i class="bi bi-files"></i> Archivos
                    </a></li>
                    <li class="nav-item"><a class="nav-link" href="templates/migrar-github.html">
                        <i class="bi bi-cloud-upload"></i> Migrar
                    </a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Hero Section -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="jumbotron bg-gradient text-white rounded hero-section">
                    <h1 class="display-4 fw-bold">Sistema de Gestión de Proveedores</h1>
                    <p class="lead">Gestiona tus proveedores, contratos y documentos con respaldo automático en GitHub</p>
                    <hr class="my-4 hero-divider">
                    <p class="fs-5">Una solución completa para administrar información de proveedores con almacenamiento seguro en la nube.</p>
                    <div class="d-flex gap-3 mt-4 flex-wrap justify-content-center justify-content-md-start">
                        <a class="btn btn-light btn-lg shadow" href="templates/lista-proveedores.html" role="button">
                            <i class="bi bi-people me-2"></i> Ver Proveedores
                        </a>
                        <a class="btn btn-outline-light btn-lg shadow" href="templates/configuracion-github.html" role="button">
                            <i class="bi bi-gear me-2"></i> Configurar Sistema
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Features -->
        <div class="row mb-5 g-4">
            <div class="col-md-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body text-center p-4">
                        <i class="bi bi-people-fill text-primary icon-large mb-3"></i>
                        <h5 class="card-title mt-3 mb-3">Gestión de Proveedores</h5>
                        <p class="card-text mb-4">Administra información completa de tus proveedores: datos fiscales, contactos y constancias de situación fiscal.</p>
                        <a href="templates/lista-proveedores.html" class="btn btn-primary btn-lg w-100">
                            <i class="bi bi-people me-2"></i> Ver Proveedores
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body text-center p-4">
                        <i class="bi bi-file-earmark-pdf-fill text-success icon-large mb-3"></i>
                        <h5 class="card-title mt-3 mb-3">Contratos y Documentos</h5>
                        <p class="card-text mb-4">Almacena y organiza contratos, constancias fiscales y documentos importantes en formato PDF de manera segura.</p>
                        <a href="templates/admin-archivos.html" class="btn btn-success btn-lg w-100">
                            <i class="bi bi-files me-2"></i> Gestionar Archivos
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body text-center p-4">
                        <i class="bi bi-cloud-upload-fill text-info icon-large mb-3"></i>
                        <h5 class="card-title mt-3 mb-3">Respaldo en GitHub</h5>
                        <p class="card-text mb-4">Sincronización automática con GitHub para respaldo seguro y acceso desde cualquier lugar del mundo.</p>
                        <a href="templates/configuracion-github.html" class="btn btn-info btn-lg w-100">
                            <i class="bi bi-github me-2"></i> Configurar GitHub
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-header bg-dark text-white">
                        <h4 class="mb-0"><i class="bi bi-lightning me-2"></i> Acciones Rápidas</h4>
                    </div>
                    <div class="card-body p-4">
                        <div class="row g-3">
                            <div class="col-md-3 col-sm-6">
                                <div class="d-grid">
                                    <button class="btn btn-outline-primary btn-lg h-100 p-3" onclick="agregarProveedor()">
                                        <i class="bi bi-plus-circle fs-2 d-block mb-2"></i>
                                        <span class="fw-semibold">Agregar Proveedor</span>
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6">
                                <div class="d-grid">
                                    <button class="btn btn-outline-success btn-lg h-100 p-3" onclick="subirDocumento()">
                                        <i class="bi bi-upload fs-2 d-block mb-2"></i>
                                        <span class="fw-semibold">Subir Documento</span>
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6">
                                <div class="d-grid">
                                    <button class="btn btn-outline-info btn-lg h-100 p-3" onclick="sincronizarGitHub()">
                                        <i class="bi bi-arrow-repeat fs-2 d-block mb-2"></i>
                                        <span class="fw-semibold">Sincronizar GitHub</span>
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6">
                                <div class="d-grid">
                                    <button class="btn btn-outline-warning btn-lg h-100 p-3" onclick="verEstadisticas()">
                                        <i class="bi bi-graph-up fs-2 d-block mb-2"></i>
                                        <span class="fw-semibold">Ver Estadísticas</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Panel -->
        <div class="row">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-header bg-secondary text-white">
                        <h5 class="mb-0"><i class="bi bi-info-circle me-2"></i> Estado del Sistema</h5>
                    </div>
                    <div class="card-body p-4">
                        <div class="row text-center g-3">
                            <div class="col-md-3 col-sm-6">
                                <div class="border rounded p-4 h-100">
                                    <h3 class="text-primary display-6 fw-bold" id="totalProveedores">0</h3>
                                    <p class="mb-0 fw-semibold text-muted">Proveedores Registrados</p>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6">
                                <div class="border rounded p-4 h-100">
                                    <h3 class="text-success display-6 fw-bold" id="totalContratos">0</h3>
                                    <p class="mb-0 fw-semibold text-muted">Contratos Activos</p>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6">
                                <div class="border rounded p-4 h-100">
                                    <h3 class="text-info display-6 fw-bold" id="totalArchivos">0</h3>
                                    <p class="mb-0 fw-semibold text-muted">Archivos Almacenados</p>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6">
                                <div class="border rounded p-4 h-100">
                                    <h3 class="display-6 fw-bold" id="estadoGitHub">❌</h3>
                                    <p class="mb-0 fw-semibold text-muted">Estado GitHub</p>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 text-center">
                            <small class="text-muted fw-medium">
                                <i class="bi bi-clock me-1"></i>
                                Última actualización: <span id="ultimaActualizacion" class="fw-semibold">Cargando...</span>
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white text-center py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <p class="mb-2 fs-6">&copy; 2025 Sistema de Gestión de Proveedores - Powered by GitHub Pages</p>
                    <small class="text-muted">Versión 1.0 - Desarrollado para gestión empresarial moderna</small>
                </div>
            </div>
            <hr class="mt-3 mb-3 footer-divider">
            <div class="row">
                <div class="col-12">
                    <small class="text-muted">
                        <i class="bi bi-shield-check me-1"></i> Almacenamiento seguro
                        <span class="mx-2">•</span>
                        <i class="bi bi-cloud me-1"></i> Respaldo automático
                        <span class="mx-2">•</span>
                        <i class="bi bi-lock me-1"></i> Datos encriptados
                    </small>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="static/js/storage.js"></script>
    <script src="static/js/ui.js"></script>
    <script src="static/js/github-storage.js"></script>
    <script src="static/js/proveedores.js"></script>
    
    <script>
        // Inicialización de la página principal
        document.addEventListener('DOMContentLoaded', function() {
            cargarEstadisticasPrincipal();
            verificarEstadoGitHub();
        });
        
        function cargarEstadisticasPrincipal() {
            try {
                const proveedores = obtenerProveedores();
                let totalContratos = 0;
                let totalArchivos = 0;
                
                proveedores.forEach(proveedor => {
                    if (proveedor.constanciaData) totalArchivos++;
                    if (proveedor.contratos) {
                        totalContratos += proveedor.contratos.length;
                        proveedor.contratos.forEach(contrato => {
                            if (contrato.documentoData) totalArchivos++;
                        });
                    }
                });
                
                document.getElementById('totalProveedores').textContent = proveedores.length;
                document.getElementById('totalContratos').textContent = totalContratos;
                document.getElementById('totalArchivos').textContent = totalArchivos;
                document.getElementById('ultimaActualizacion').textContent = new Date().toLocaleString();
                
            } catch (error) {
                console.error('Error al cargar estadísticas:', error);
            }
        }
        
        function verificarEstadoGitHub() {
            const estadoGitHub = document.getElementById('estadoGitHub');
            
            if (window.githubStorage && window.githubStorage.configurado()) {
                estadoGitHub.textContent = '✅';
                estadoGitHub.className = 'text-success';
            } else {
                estadoGitHub.textContent = '❌';
                estadoGitHub.className = 'text-danger';
            }
        }
        
        // Funciones de acciones rápidas
        function agregarProveedor() {
            window.location.href = 'templates/lista-proveedores.html';
        }
        
        function subirDocumento() {
            window.location.href = 'templates/admin-archivos.html';
        }
        
        function sincronizarGitHub() {
            if (window.githubStorage && window.githubStorage.configurado()) {
                window.location.href = 'templates/migrar-github.html';
            } else {
                if (confirm('GitHub no está configurado. ¿Deseas configurarlo ahora?')) {
                    window.location.href = 'templates/configuracion-github.html';
                }
            }
        }
        
        function verEstadisticas() {
            window.location.href = 'templates/admin-archivos.html';
        }
    </script>
</body>
</html>
